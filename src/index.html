<!DOCTYPE html>

<html lang='en' ng-app='fractalBakery'>
    <head>
        <meta charset='utf-8' />

        <title>Fractal Bakery | Roll your own fractals</title>

        <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Roboto:400' />
        <!--(if target dev)><!-->
        <link rel='stylesheet' href='../bower_components/pure/pure.css' />

        <link rel='stylesheet' href='css/fractalviewer.css' />
        <link rel='stylesheet' href='css/fractalbakery.css' />

        <script src='../bower_components/jquery/dist/jquery.js'></script>
        <script src='../bower_components/angular/angular.js'></script>

        <script src='controllers/main.js'></script>
        <script src='services/fractalrenderer.js'></script>
        <script src='directives/fractalviewer.js'></script>
        <!--<!(endif)-->
        <!--(if target build)>
        <link rel='stylesheet' href='fractalbakery.min.css' />
        <script src='fractalbakery.min.js'></script>
        <!(endif)-->
    </head>

    <body>
        <div ng-controller='MainCtrl' class='pure-g'>
            <div class='pure-u-1-3'>
                <form class='pure-form pure-form-aligned'>
                    <legend>Fractal parameters</legend>

                    <fieldset>
                        <div class='pure-control-group'>
                            <label for='maxIter'>Max. iteration count:</label>
                            <input type='number' ng-model='fractalParams.maxIter'
                                min='1' required id='maxIter' class='mednum'/>
                        </div>
                        <div class='pure-control-group'>
                            <label for='eps'>Tolerance:</label>
                            10^(-<input type='number' ng-model='tolExponent'
                                min='0' required id='eps' class='shortnum'
                                ng-change='updateTolerance()' />)
                        </div>
                        <div class='pure-control-group'>
                            <label>Width:</label>
                            <input type='number' ng-model='width'
                                class='mednum' min='3' required /> px
                        </div>
                        <div class='pure-control-group'>
                            <label>Height:</label>
                            <input type='number' ng-model='height'
                                class='mednum' min='3' required /> px
                        </div>

                        <div class='pure-control-group'>
                            <label>Top left corner:</label>
                            <input type='number' class='shortnum'
                                ng-model='fractalParams.reMin' required /> +
                            <input type='number' class='shortnum'
                                ng-model='fractalParams.imMin' required />i
                        </div>
                        <div class='pure-control-group'>
                            <label>Bottom right corner:</label>
                            <input type='number' class='shortnum'
                                ng-model='fractalParams.reMax' required /> +
                            <input type='number' class='shortnum'
                                ng-model='fractalParams.imMax' required />i
                        </div>
                    </fieldset>
                </form>

                <form class='pure-form pure-form-aligned'>
                    <div ng-repeat='root in fractalParams.roots'>
                        <legend>Root {{$index}}</legend>
                        <fieldset>
                            <div class='pure-control-group'>
                                <label>Position:</label>
                                <input type='number' class='shortnum'
                                    ng-model='root.root.Re' required /> +
                                <input type='number' class='shortnum'
                                    ng-model='root.root.Im' required />i
                            </div>
                            <div class='pure-control-group'>
                                <label>Hue (0-1):</label>
                                <input type='number' class='mednum' required
                                    ng-model='root.hue' min='0' max='1' />
                            </div>
                        </fieldset>
                    </div>
                </form>
            </div>

            <div class='pure-u-2-3' id='fractal'>
                <div class='pad1em' ng-style="{'width': width, 'height': height}">
                    <div id='fractal-wrap'>
                        <fractal-viewer id='viewer' params='fractalParams'
                            ng-style="{'width': width, 'height': height}">
                        </fractal-viewer>

                        <svg ng-attr-width='{{width}}' ng-attr-height='{{height}}'
                            ng-mousemove='mouseMove($event)' id='roots'>
                            <circle ng-repeat='root in fractalParams.roots'
                                r='10'
                                ng-attr-cx='{{reToX(root.root.Re)}}'
                                ng-attr-cy='{{imToY(root.root.Im)}}'
                                ng-mousedown='$parent.dragRoot = root'
                                ng-mouseup='$parent.dragRoot = undefined'
                                ng-mouseleave='$parent.dragRoot = undefined'
                                ng-class='{"active": $parent.dragRoot === root}' />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
